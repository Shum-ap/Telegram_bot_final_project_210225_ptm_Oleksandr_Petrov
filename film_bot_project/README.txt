# 🎬 Telegram Бот: Поиск фильмов по базе Sakila

**Проект:** `final_project_210225_ptm_Oleksandr_Petrov`
**Автор:** Oleksandr Petrov
**Группа:** 210225_ptm
**Преподаватели:** Saidjonov Behruz, Kudryashov Konstantin

---

## 📌 Описание проекта

Это Telegram-бот на Python, позволяющий интерактивно искать фильмы в базе **Sakila (MySQL)**.
Каждый пользовательский запрос логируется в **MongoDB**, а результаты выводятся с постраничной навигацией.

---

## 🎯 Функциональность

- 🔍 Поиск фильмов по **ключевому слову** (названию)
- 🎞 Поиск по **жанру** и диапазону **годов**
- 📊 Просмотр **истории запросов**:
  - топ-5 популярных
  - последние 5 уникальных
- 🧾 **MongoDB** логирование всех запросов с параметрами и временем
- 📋 Вывод в Telegram — красиво отформатированный с Markdown + кнопки навигации

---

## 🛠 Используемые технологии

| Компонент        | Технология                         |
|------------------|------------------------------------|
| Язык             | Python 3.13                        |
| Telegram API     | `python-telegram-bot`              |
| СУБД фильмов     | MySQL (Sakila)                     |
| Хранилище логов  | MongoDB                            |
| Подключение к БД | `pymysql`, `pymongo`               |
| Формат вывода    | `tabulate`, `Markdown`             |
| Управление конфигом | `python-dotenv`                |

---

## 📁 Структура проекта

film_bot_project/
│
├── bot.py                     # 🎬 Точка входа. Запускает Telegram-бота и регистрирует хендлеры
├── .env                       # 🔐 Секреты (токен, доступы к БД)
├── config.py                  # ⚙️ Загружает переменные окружения
├── requirements.txt           # 📦 Все зависимости проекта
├── README.md                  # 📖 Документация по запуску и использованию

├── db/                        # 📂 Работа с базами данных
│   ├── __init__.py
│   ├── mysql_connector.py     # 🔍 Запросы к MySQL (поиск по ключу, жанру/году)
│   ├── log_writer.py          # 📝 Запись поисковых запросов в MongoDB
│   ├── log_stats.py           # 📊 Топ и последние запросы из MongoDB

├── handlers/                  # 🤖 Обработка команд Telegram-бота
│   ├── __init__.py
│   ├── search.py              # 🔍 Поиск по ключевому слову
│   ├── genre_menu.py          # 🎭 Вывод жанров и выбор года
│   ├── history.py             # 📊 Вывод истории (топ/последние)

├── formatter.py               # 🧾 Форматирование вывода для Telegram и консоли
├──.env